<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sisli Orman GÃ¼nlÃ¼kleri</title>
    <style>
        :root { --gold: #f1c40f; --bg: #0a0a0a; --panel: #161616; --text: #dcdcdc; --red: #c0392b; --blue: #2980b9; --green: #27ae60; }
        body { background: var(--bg); color: var(--text); font-family: 'Constantia', serif; margin: 0; overflow: hidden; }
        
        .screen { position: fixed; inset: 0; display: none; flex-direction: column; align-items: center; justify-content: center; z-index: 100; }
        #setup-screen { display: flex; background: #000; z-index: 5000; }
        #game-screen { background: var(--bg); z-index: 10; display: flex; }
        #overlay { background: rgba(0,0,0,0.95); z-index: 2000; }

        .box { background: var(--panel); padding: 25px; border: 1px solid #333; border-radius: 4px; width: 320px; text-align: center; box-shadow: 0 0 30px rgba(0,0,0,1); }
        #log-window { flex: 1; width: 100%; padding: 25px; overflow-y: auto; box-sizing: border-box; padding-bottom: 140px; background: radial-gradient(circle at center, #1a1a1a 0%, #0a0a0a 100%); }
        .log-entry { margin-bottom: 20px; padding-bottom: 10px; border-bottom: 1px dotted #333; line-height: 1.6; font-size: 15px; animation: fadeIn 0.5s ease; }
        @keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }
        
        .btn { background: #1a1a1a; color: #aaa; border: 1px solid #444; padding: 14px; margin: 6px; cursor: pointer; width: 100%; font-family: inherit; transition: 0.3s; text-transform: uppercase; letter-spacing: 1px; }
        .btn:hover:not(.locked) { border-color: var(--gold); color: var(--gold); background: #222; }
        .locked { opacity: 0.3; cursor: not-allowed; filter: grayscale(1); position: relative; }
        .locked::after { content: " ğŸ”’"; font-size: 12px; }
        
        #explore-btn { width: 100%; height: 80px; background: #1a1a1a; border-top: 2px solid var(--blue); color: var(--blue); font-weight: bold; font-size: 18px; position: fixed; bottom: 0; z-index: 500; display: none; }
        #menu-trigger { position: fixed; bottom: 100px; right: 25px; width: 65px; height: 65px; background: var(--gold); color: #000; border-radius: 50%; display: none; align-items: center; justify-content: center; font-size: 30px; cursor: pointer; z-index: 1000; border: 3px solid #000; box-shadow: 0 4px 15px rgba(0,0,0,0.5); }

        #battle-hud { background: #1a0505; border: 1px solid var(--red); padding: 20px; width: 90%; margin: 10px auto; border-radius: 8px; display: none; position: fixed; top: 10px; left: 5%; z-index: 600; }
        .bar { height: 12px; background: #222; border-radius: 6px; margin: 10px 0; overflow: hidden; border: 1px solid #444; }
        .bar-fill { height: 100%; background: var(--red); width: 100%; transition: 0.5s cubic-bezier(0.17, 0.67, 0.83, 0.67); }
        #skill-bar { display: flex; gap: 8px; margin-top: 15px; }

        input, select { width: 100%; padding: 14px; margin: 12px 0; background: #111; color: #fff; border: 1px solid #444; box-sizing: border-box; }
    </style>
</head>
<body>

    <div id="setup-screen" class="screen">
        <div class="box" style="border-top: 4px solid var(--gold);">
            <h2 style="color:var(--gold); margin-top:0;">KADERÄ°N MÃœHRÃœ</h2>
            <input type="text" id="p-name" placeholder="AdÄ±nÄ± fÄ±sÄ±lda...">
            <select id="p-gender"><option value="Erkek">Erkek</option><option value="KadÄ±n">KadÄ±n</option></select>
            <select id="p-class">
                <option value="SavaÅŸÃ§Ä±">SavaÅŸÃ§Ä±</option>
                <option value="BÃ¼yÃ¼cÃ¼">BÃ¼yÃ¼cÃ¼</option>
                <option value="AvcÄ±">AvcÄ±</option>
                <option value="ÅifacÄ±">ÅifacÄ±</option>
            </select>
            <button class="btn" style="border-color:var(--gold); color:var(--gold);" onclick="startGame()">UYANIÅI BAÅLAT</button>
        </div>
    </div>

    <div id="game-screen" class="screen">
        <div id="battle-hud">
            <div style="display:flex; justify-content:space-between; font-family: serif; font-style: italic;">
                <span id="m-name" style="color:var(--red); font-weight:bold;">YaratÄ±k</span>
                <span id="p-hp-display" style="color:var(--green);">Ruh SaÄŸlÄ±ÄŸÄ±: 100</span>
            </div>
            <div class="bar"><div id="m-hp-bar" class="bar-fill"></div></div>
            <div id="skill-bar"></div>
        </div>
        <div id="log-window"></div>
        <div id="menu-trigger" onclick="toggleMenu('main')">ğŸ“œ</div>
        <button id="explore-btn" onclick="explore()">SÄ°SLÄ° ORMANIN DERÄ°NLÄ°ÄÄ°NE Ä°LERLE</button>
    </div>

    <div id="overlay" class="screen" onclick="if(event.target==this) closeOverlay()">
        <div id="menu-content" class="box" onclick="event.stopPropagation()"></div>
    </div>

<script>
    let p = { 
        name: "", gender: "", class: "", lvl: 1, xp: 0, nextXp: 100, 
        hp: 100, maxHp: 100, atk: 14, weapon: null,
        inv: [], pets: [], mounts: [] 
    };

    const classData = {
        "SavaÅŸÃ§Ä±": { w: "AÄŸÄ±r Ã‡elik KÄ±lÄ±Ã§", basic: "Yumruk", s1: "VahÅŸi Darbe", s2: "GÃ¶k Yaratan Ã–fke", story: "kÄ±lÄ±cÄ±nÄ±n aÄŸÄ±rlÄ±ÄŸÄ±nÄ± kollarÄ±nda hissettiÄŸin o gÃ¼nleri" },
        "BÃ¼yÃ¼cÃ¼": { w: "Kristal Asa", basic: "KÄ±vÄ±lcÄ±m", s1: "Alev Topu", s2: "ZamanÄ±n Sonu", story: "kitaplarÄ±n arasÄ±ndaki kadim fÄ±sÄ±ltÄ±larÄ±" },
        "AvcÄ±": { w: "Kemik Yay", basic: "BÄ±Ã§ak", s1: "Zehirli Ok", s2: "GÃ¶lge AvÄ±", story: "rÃ¼zgarÄ±n yÃ¶nÃ¼nÃ¼ derinde duyduÄŸun avlarÄ±nÄ±" },
        "ÅifacÄ±": { w: "Kutsal Dal", basic: "IÅŸÄ±k", s1: "MÃ¼hÃ¼r OnarÄ±mÄ±", s2: "Ä°lahi HÃ¼kÃ¼m", story: "baÅŸkalarÄ±nÄ±n yaralarÄ±nÄ± kendi sÄ±zÄ±n gibi hissettiÄŸin anlarÄ±" }
    };

    const monsterDB = [
        { n: "Sis SÄ±Ã§anÄ±", min: 1, max: 3, hp: 40, atk: 8, xp: 45 },
        { n: "YalnÄ±z Kurt", min: 1, max: 5, hp: 65, atk: 12, xp: 60 },
        { n: "GÃ¶lge GÃ¶zcÃ¼", min: 4, max: 7, hp: 130, atk: 25, xp: 180 },
        { n: "BataklÄ±k HeyulasÄ±", min: 7, max: 9, hp: 350, atk: 55, xp: 550 },
        { n: "KADÄ°M EJDERHA", min: 10, max: 10, hp: 1200, atk: 90, xp: 5000 }
    ];

    let enemy = null;

    function startGame() {
        const nInput = document.getElementById('p-name').value;
        if(!nInput) return;
        p.name = nInput; p.gender = document.getElementById('p-gender').value; p.class = document.getElementById('p-class').value;

        document.getElementById('setup-screen').style.display = 'none';
        document.getElementById('game-screen').style.display = 'flex';
        document.getElementById('explore-btn').style.display = 'block';
        document.getElementById('menu-trigger').style.display = 'flex';

        addLog(`GÃ¶zlerini actÄ±ÄŸÄ±nda Ã¼zerinde aÄŸÄ±r bir sis tabakasÄ± vardÄ±. Elas, kamp ateÅŸinin loÅŸ Ä±ÅŸÄ±ÄŸÄ±nda sana doÄŸru eÄŸildi: "${p.name}, demek sonunda uyandÄ±n. HatÄ±rlÄ±yor musun ${classData[p.class].story}? ArtÄ±k o gÃ¼nler geride kaldÄ±. Åimdi kolundaki parlayan mÃ¼hÃ¼rle ve sadece ellerinle hayatta kalmalÄ±sÄ±n."`);
    }

    function explore() {
        if(enemy) return;
        // ALGORÄ°TMA: Seviyeye gÃ¶re canavar seÃ§imi
        let pool = monsterDB.filter(m => p.lvl >= m.min && p.lvl <= m.max);
        if(pool.length === 0) pool = [monsterDB[monsterDB.length-1]];
        
        enemy = { ...pool[Math.floor(Math.random()*pool.length)] };
        enemy.maxHp = enemy.hp;

        document.getElementById('battle-hud').style.display = 'block';
        document.getElementById('explore-btn').style.display = 'none';
        updateBattleUI();
        refreshSkills();
        addLog(`Sislerin iÃ§inden bir <b>${enemy.n}</b> belirdi. Elas sessizce geri Ã§ekilirken fÄ±sÄ±ldadÄ±: "MÃ¼hrÃ¼n gÃ¼cÃ¼ne gÃ¼ven..."`);
    }

    function refreshSkills() {
        const container = document.getElementById('skill-bar');
        let basic = p.weapon ? "Silahla SaldÄ±r" : classData[p.class].basic;
        let html = `<button class="btn" style="border-color:var(--red); color:var(--red);" onclick="action(1, 'dmg')">${basic}</button>`;
        
        if(p.lvl >= 5) {
            let mode = p.class === "ÅifacÄ±" ? "heal" : "dmg";
            let color = p.class === "ÅifacÄ±" ? "var(--green)" : "var(--blue)";
            html += `<button class="btn" style="border-color:${color}; color:${color};" onclick="action(2.5, '${mode}')">${classData[p.class].s1}</button>`;
        }
        if(p.lvl >= 10) {
            html += `<button class="btn" style="border-color:var(--gold); color:var(--gold);" onclick="action(5, 'dmg')">${classData[p.class].s2}</button>`;
        }
        container.innerHTML = html;
    }

    function action(mult, type) {
        if(!enemy) return;
        if(type === 'dmg') {
            let d = Math.floor(p.atk * mult); enemy.hp -= d;
            addLog(`${enemy.n} Ã¼zerine hamle yaptÄ±n, ${d} hasar verdin.`);
        } else {
            let h = Math.floor(p.maxHp * 0.35); p.hp = Math.min(p.maxHp, p.hp + h);
            addLog(`MÃ¼hrÃ¼n parladÄ±, yaralarÄ±n kapandÄ±. ${h} can yenilendi.`);
        }

        if(enemy.hp <= 0) {
            addLog(`${enemy.n} sislere karÄ±ÅŸarak yok oldu.`);
            gainXp(enemy.xp); endBattle();
        } else {
            p.hp -= enemy.atk;
            addLog(`${enemy.n} penÃ§esini savurdu! (-${enemy.atk} Can)`);
            if(p.hp <= 0) { addLog("Bilincin kapandÄ±... Elas seni ateÅŸin baÅŸÄ±na taÅŸÄ±dÄ±."); p.hp = p.maxHp; endBattle(); }
        }
        updateBattleUI();
    }

    function gainXp(amt) {
        p.xp += amt;
        if(p.xp >= p.nextXp) {
            p.lvl++; p.xp = 0; p.nextXp += 100; p.atk += 12; p.maxHp += 40; p.hp = p.maxHp;
            addLog(`<b style="color:var(--gold)">HÄ°KAYENDE YENÄ° BÄ°R SAYFA: SEVÄ°YE ${p.lvl}!</b>`);
            if(p.lvl === 2) { p.inv.push(classData[p.class].w); addLog(`<i>Elas kÃ¼llerin arasÄ±ndan bir ÅŸey Ã§Ä±kardÄ±: "SanÄ±rÄ±m bu sana ait." <b>${classData[p.class].w}</b> Ã§antana eklendi.</i>`); }
            if(p.lvl === 3) addLog(`<i>MÃ¼hrÃ¼n Ä±sÄ±sÄ± artÄ±yor... ArtÄ±k ekipmanlarÄ±nÄ± kuÅŸanabilecek kadar gÃ¼Ã§lÃ¼sÃ¼n.</i>`);
            if(p.lvl === 5) addLog(`<i>Ruhun ve mÃ¼hÃ¼r birleÅŸti. ${classData[p.class].s1} yeteneÄŸi uyandÄ±.</i>`);
        }
    }

    function endBattle() { enemy = null; document.getElementById('battle-hud').style.display = 'none'; document.getElementById('explore-btn').style.display = 'block'; }
    function updateBattleUI() { 
        if(enemy) document.getElementById('m-hp-bar').style.width = (enemy.hp/enemy.maxHp*100)+"%";
        document.getElementById('p-hp-display').innerText = `Ruh SaÄŸlÄ±ÄŸÄ±: ${p.hp}/${p.maxHp}`;
    }
    function addLog(m) { const l = document.getElementById('log-window'); l.innerHTML += `<div class="log-entry">${m}</div>`; l.scrollTop = l.scrollHeight; }

    function toggleMenu(type) {
        const overlay = document.getElementById('overlay'); const content = document.getElementById('menu-content');
        overlay.style.display = 'flex';
        if(type === 'main') {
            content.innerHTML = `<h3 style="color:var(--gold); border-bottom:1px solid #444; padding-bottom:10px;">GÃœNLÃœK</h3>
                <button class="btn" onclick="toggleMenu('profile')">ğŸ‘¤ KÄ°MLÄ°K</button>
                <button class="btn ${p.lvl < 2 ? 'locked' : ''}" onclick="${p.lvl >= 2 ? "toggleMenu('bag')" : ""}">ğŸ’ Ã‡ANTA (2)</button>
                <button class="btn ${p.lvl < 3 ? 'locked' : ''}" onclick="${p.lvl >= 3 ? "toggleMenu('equip')" : ""}">âš”ï¸ KUÅANMA (3)</button>
                <button class="btn ${p.lvl < 8 ? 'locked' : ''}" onclick="${p.lvl >= 8 ? "toggleMenu('pet')" : ""}">ğŸ¾ YOLDAÅ (8)</button>
                <button class="btn ${p.lvl < 10 ? 'locked' : ''}" onclick="${p.lvl >= 10 ? "toggleMenu('mount')" : ""}">ğŸ BÄ°NEK (10)</button>
                <button class="btn" style="color:var(--red); border-color:var(--red);" onclick="closeOverlay()">KAPAT</button>`;
        } else if(type === 'profile') {
            content.innerHTML = `<h4>${p.name}</h4><p>SÄ±nÄ±f: ${p.class}<br>Seviye: ${p.lvl}<br>SaldÄ±rÄ±: ${p.atk}</p><button class="btn" onclick="toggleMenu('main')">GERÄ°</button>`;
        } else if(type === 'bag') {
            content.innerHTML = `<h4>Ã‡ANTA</h4><p>${p.inv.join("<br>") || "Sadece toz ve anÄ±lar var."}</p><button class="btn" onclick="toggleMenu('main')">GERÄ°</button>`;
        } else if(type === 'equip') {
            let itm = classData[p.class].w;
            content.innerHTML = `<h4>KUÅANMA</h4><p>Eldeki: ${p.weapon || "Ã‡Ä±plak Eller"}</p>
                <button class="btn" onclick="equip()">[${itm}] KuÅŸan</button>
                <button class="btn" onclick="toggleMenu('main')">GERÄ°</button>`;
        } else { content.innerHTML = `<h4>YETKÄ°N DEÄÄ°LSÄ°N</h4><p>Bu gÃ¼Ã§ iÃ§in henÃ¼z erkenci...</p><button class="btn" onclick="toggleMenu('main')">GERÄ°</button>`; }
    }

    function equip() {
        let itm = classData[p.class].w;
        if(p.inv.includes(itm) && !p.weapon) {
            p.weapon = itm; p.atk += 25; addLog(`${itm} kuÅŸanÄ±ldÄ±. ArtÄ±k sislere karÅŸÄ± daha hazÄ±rsÄ±n.`); toggleMenu('equip');
        } else { alert("Zaten kuÅŸanÄ±ldÄ±!"); }
    }

    function closeOverlay() { document.getElementById('overlay').style.display = 'none'; }
</script>
</body>
</html>
