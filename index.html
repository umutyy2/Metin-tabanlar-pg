<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <title>Sisli Orman GÃ¼nlÃ¼kleri - BÃ¶lÃ¼m 1</title>
    <style>
        :root { --gold: #f1c40f; --bg: #0d0d0d; --panel: #1a1a1a; --text: #e0e0e0; --blue: #3498db; --red: #e74c3c; }
        body { background: var(--bg); color: var(--text); font-family: 'Georgia', serif; margin: 0; overflow: hidden; }
        
        /* EKRAN KATMANLARI */
        .screen { position: fixed; inset: 0; display: none; flex-direction: column; align-items: center; justify-content: center; z-index: 100; }
        #setup-screen { display: flex; background: #000; z-index: 1000; }
        #game-screen { background: var(--bg); z-index: 10; }
        #menu-overlay { background: rgba(0,0,0,0.95); z-index: 2000; }

        /* SAVAÅ PANELÄ° */
        #battle-hud { background: #1a0505; border: 2px solid var(--red); padding: 15px; width: 90%; margin: 10px auto; border-radius: 10px; display: none; box-shadow: 0 0 15px rgba(231, 76, 60, 0.2); }
        .bar { height: 8px; background: #333; border-radius: 4px; margin: 5px 0; overflow: hidden; }
        .bar-fill { height: 100%; background: #2ecc71; width: 100%; transition: 0.4s; }

        /* LOG VE HÄ°KAYE AKIÅI */
        #log-window { flex: 1; width: 100%; padding: 25px; overflow-y: auto; box-sizing: border-box; }
        .log-entry { margin-bottom: 15px; padding: 12px; background: rgba(255,255,255,0.02); border-left: 4px solid var(--gold); line-height: 1.6; font-style: italic; animation: fadeIn 0.5s; }
        
        .btn { background: #222; color: #fff; border: 1px solid #444; padding: 12px; margin: 5px; border-radius: 6px; cursor: pointer; width: 100%; font-family: inherit; transition: 0.2s; }
        .btn:hover { border-color: var(--gold); background: #2a2a2a; }
        #explore-btn { width: 100%; height: 70px; background: var(--blue); border: none; color: white; font-weight: bold; font-size: 18px; text-transform: uppercase; letter-spacing: 2px; }
        #menu-btn { position: fixed; bottom: 90px; right: 20px; width: 60px; height: 60px; background: var(--gold); border-radius: 50%; display: none; align-items: center; justify-content: center; font-size: 30px; cursor: pointer; z-index: 1000; border: 2px solid #000; }

        input, select { width: 85%; padding: 12px; margin: 10px; background: #222; color: #fff; border: 1px solid #444; border-radius: 5px; }
        @keyframes fadeIn { from { opacity: 0; transform: translateX(-10px); } to { opacity: 1; transform: translateX(0); } }
    </style>
</head>
<body>

    <div id="setup-screen" class="screen">
        <div style="background:var(--panel); padding:40px; border:2px solid var(--gold); border-radius:20px; text-align:center; width: 320px;">
            <h2 style="color:var(--gold); margin-bottom: 20px;">RUHUNU UYANDIR</h2>
            <input type="text" id="p-name" placeholder="AdÄ±n nedir, yolcu?">
            <select id="p-gender"><option value="Erkek">Erkek</option><option value="KadÄ±n">KadÄ±n</option></select>
            <select id="p-class"><option value="savasci">SavaÅŸÃ§Ä±</option><option value="buyucu">BÃ¼yÃ¼cÃ¼</option><option value="avci">AvcÄ±</option></select>
            <button class="btn" style="background:var(--gold); color:#000; font-weight:bold; border:none; margin-top: 10px;" onclick="startGame()">BAÅLA</button>
        </div>
    </div>

    <div id="game-screen" class="screen">
        <div id="log-window"></div>
        
        <div id="battle-hud">
            <div style="display:flex; justify-content:space-between; font-size:14px; margin-bottom: 5px;">
                <span id="m-name" style="color:var(--red); font-weight:bold;">Canavar</span>
                <span id="m-hp-text">50/50</span>
            </div>
            <div class="bar"><div id="m-hp-bar" class="bar-fill" style="background:var(--red)"></div></div>
            <button class="btn" style="background:var(--red); border:none; font-weight:bold;" onclick="attack()">KILIÃ‡ SAVUR!</button>
        </div>

        <div id="menu-btn" onclick="openMenu()">ğŸ“œ</div>
        <button id="explore-btn" onclick="explore()">ORMANIN DERÄ°NLÄ°KLERÄ°NE Ä°LERLE</button>
    </div>

    <div id="menu-overlay" class="screen">
        <div id="menu-content" style="background:var(--panel); padding:30px; border:2px solid var(--gold); border-radius:15px; width:300px; text-align:center;"></div>
    </div>

<script>
    // --- OYUNCU VE CANAVAR VERÄ°LERÄ° ---
    let player = { 
        name: "", gender: "", class: "", lvl: 1, xp: 0, nextXp: 100, 
        hp: 100, maxHp: 100, atk: 15, gold: 0
    };

    const monsterDB = [
        { name: "Yavru Kurt", minLvl: 1, hp: 40, atk: 8, xp: 45 },
        { name: "Zehirli Ã–rÃ¼mcek", minLvl: 1, hp: 35, atk: 12, xp: 50 },
        { name: "Bozuk ZÄ±rhlÄ± Ä°skelet", minLvl: 4, hp: 80, atk: 15, xp: 80 },
        { name: "GÃ¶lge Hayaleti", minLvl: 4, hp: 70, atk: 20, xp: 90 },
        { name: "Orman TrolÃ¼", minLvl: 7, hp: 150, atk: 25, xp: 150 },
        { name: "BataklÄ±k CadÄ±sÄ±", minLvl: 8, hp: 120, atk: 35, xp: 180 },
        { name: "GÃ¶lge Ejderi Yavrusu", minLvl: 10, hp: 400, atk: 50, xp: 500 }
    ];

    let currentEnemy = null;

    // --- OYUN AKIÅI ---
    function startGame() {
        const nameIn = document.getElementById('p-name').value;
        if(!nameIn) return alert("Kaderin bir isme ihtiyacÄ± var!");
        
        player.name = nameIn;
        player.gender = document.getElementById('p-gender').value;
        player.class = document.getElementById('p-class').value;

        document.getElementById('setup-screen').style.display = 'none';
        document.getElementById('game-screen').style.display = 'flex';
        document.getElementById('menu-btn').style.display = 'flex';
        
        addLog(`GÃ¶zlerini aÃ§tÄ±ÄŸÄ±nda karÅŸÄ±nda Elas'Ä±n derin Ã§izgilerle dolu yÃ¼zÃ¼nÃ¼ gÃ¶rdÃ¼n. "${player.gender === 'Erkek' ? 'DelikanlÄ±' : 'GenÃ§ kÄ±z'}, Sisli Orman'a hoÅŸ geldin. Kolundaki o mÃ¼hÃ¼r... Seni ya krallÄ±ÄŸa taÅŸÄ±yacak ya da bu topraklara gÃ¶mecek."`);
    }

    function explore() {
        if(currentEnemy) return;

        // SEVÄ°YE ALGORÄ°TMASI: Sadece oyuncunun seviyesine uygun canavarlar gelir
        let possibleMonsters = monsterDB.filter(m => player.lvl >= m.minLvl);
        let m = possibleMonsters[Math.floor(Math.random() * possibleMonsters.length)];
        
        currentEnemy = { ...m, maxHp: m.hp };

        document.getElementById('explore-btn').style.display = 'none';
        document.getElementById('battle-hud').style.display = 'block';
        updateUI();
        
        addLog(`SÄ±k dallarÄ±n arasÄ±ndan bir hÄ±rÄ±ltÄ± yÃ¼kseldi. Bir <b>${currentEnemy.name}</b> yolunu kesti! GÃ¶zlerinde kadim bir nefret var.`);
    }

    function attack() {
        if(!currentEnemy) return;
        
        // Oyuncunun Hamlesi
        currentEnemy.hp -= player.atk;
        addLog(`KÄ±lÄ±cÄ±nÄ± savurdun, ${currentEnemy.name} acÄ±yla geriledi!`);

        if(currentEnemy.hp <= 0) {
            addLog(`${currentEnemy.name} yere yÄ±ÄŸÄ±lÄ±rken ruhu sislere karÄ±ÅŸtÄ±. GÃ¼Ã§lendiÄŸini hissediyorsun.`);
            gainXp(currentEnemy.xp);
            endBattle();
        } else {
            // CanavarÄ±n Hamlesi
            player.hp -= currentEnemy.atk;
            addLog(`${currentEnemy.name} karÅŸÄ± ataÄŸa geÃ§ti! KaburgalarÄ±nda keskin bir acÄ± hissettin.`);
            if(player.hp <= 0) {
                addLog("GÃ¶rÃ¼ÅŸÃ¼n bulanÄ±klaÅŸÄ±yor... Elas seni sislere bÄ±rakmadÄ±, kampa geri taÅŸÄ±dÄ±.");
                player.hp = Math.floor(player.maxHp * 0.5); // CezalÄ± dirilme
                endBattle();
            }
        }
        updateUI();
    }

    function gainXp(amt) {
        player.xp += amt;
        if(player.xp >= player.nextXp) {
            player.lvl++;
            player.xp = 0;
            player.nextXp += 60;
            player.atk += 6;
            player.maxHp += 25;
            player.hp = player.maxHp;
            addLog(`<b style="color:var(--gold)">KOLUNDAKÄ° MÃœHÃœR PARLIYOR! Seviye ${player.lvl} oldun. GÃ¼cÃ¼n katlandÄ±.</b>`);
            
            if(player.lvl === 5) addLog("<i>Zihninde bir kapÄ± aralandÄ±... Ä°lk Ã¶zel yeteneÄŸin uyanmak Ã¼zere.</i>");
        }
    }

    function endBattle() {
        currentEnemy = null;
        document.getElementById('battle-hud').style.display = 'none';
        document.getElementById('explore-btn').style.display = 'block';
    }

    function updateUI() {
        if(currentEnemy) {
            document.getElementById('m-name').innerText = currentEnemy.name;
            document.getElementById('m-hp-text').innerText = `${currentEnemy.hp}/${currentEnemy.maxHp}`;
            document.getElementById('m-hp-bar').style.width = `${(currentEnemy.hp/currentEnemy.maxHp)*100}%`;
        }
    }

    function addLog(msg) {
        const win = document.getElementById('log-window');
        win.innerHTML += `<div class="log-entry">${msg}</div>`;
        win.scrollTop = win.scrollHeight;
    }

    // --- MENÃœ SÄ°STEMÄ° ---
    function openMenu() {
        const overlay = document.getElementById('menu-overlay');
        overlay.style.display = 'flex';
        renderMainMenu();
    }

    function renderMainMenu() {
        document.getElementById('menu-content').innerHTML = `
            <h2 style="color:var(--gold)">ANA MENÃœ</h2>
            <button class="btn" onclick="showProfile()">ğŸ‘¤ PROFÄ°L</button>
            <button class="btn" onclick="showMounts()">ğŸ BÄ°NEK PANELÄ°</button>
            <button class="btn" style="background:var(--red); margin-top:15px;" onclick="closeMenu()">âŒ KAPAT</button>
        `;
    }

    function showProfile() {
        document.getElementById('menu-content').innerHTML = `
            <h2 style="color:var(--gold)">ğŸ‘¤ KAHRAMAN</h2>
            <div style="text-align:left; font-size:14px; margin-bottom:10px;">
                <p><b>Ä°sim:</b> ${player.name}</p>
                <p><b>Seviye:</b> ${player.lvl}</p>
                <p><b>XP:</b> ${player.xp} / ${player.nextXp}</p>
                <p><b>Can:</b> ${player.hp} / ${player.maxHp}</p>
                <p><b>SaldÄ±rÄ±:</b> ${player.atk}</p>
            </div>
            <button class="btn" onclick="renderMainMenu()">ğŸ”™ GERÄ° DÃ–N</button>
        `;
    }

    function showMounts() {
        const content = document.getElementById('menu-content');
        if(player.lvl < 10) {
            content.innerHTML = `<h3>Kilitli</h3><p style="font-size:12px;">Seviye 10 olduÄŸunda Elas'Ä±n hediyesi seni bekliyor.</p><button class="btn" onclick="renderMainMenu()">ğŸ”™ GERÄ°</button>`;
        } else {
            content.innerHTML = `<h3>Bineklerin</h3><button class="btn" onclick="alert('Eski Tahta At: HÄ±z +%10')">ğŸ“š ANSÄ°KLOPEDÄ°</button><button class="btn" onclick="renderMainMenu()">ğŸ”™ GERÄ°</button>`;
        }
    }

    function closeMenu() { document.getElementById('menu-overlay').style.display = 'none'; }
</script>
</body>
</html>
