<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sisli Orman GÃ¼nlÃ¼kleri</title>
    <style>
        :root { --gold: #f1c40f; --bg: #0d0d0d; --panel: #1a1a1a; --text: #e0e0e0; --red: #e74c3c; --blue: #3498db; --green: #2ecc71; }
        body { background: var(--bg); color: var(--text); font-family: 'Georgia', serif; margin: 0; overflow: hidden; }
        
        .screen { position: fixed; inset: 0; display: none; flex-direction: column; align-items: center; justify-content: center; z-index: 100; }
        #setup-screen { display: flex; background: #000; z-index: 5000; }
        #game-screen { background: var(--bg); z-index: 10; display: flex; flex-direction: column; }
        #overlay { background: rgba(0,0,0,0.98); z-index: 2000; }

        .box { background: var(--panel); padding: 25px; border: 2px solid var(--gold); border-radius: 15px; width: 320px; text-align: center; }
        #log-window { flex: 1; width: 100%; padding: 20px; box-sizing: border-box; display: flex; flex-direction: column; justify-content: flex-end; overflow: hidden; }
        .log-entry { margin-bottom: 10px; padding: 12px; background: rgba(255,255,255,0.02); border-left: 4px solid var(--gold); font-size: 14px; animation: fadeIn 0.3s; }
        @keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }
        
        .btn { background: #222; color: #fff; border: 1px solid #444; padding: 12px; margin: 5px; border-radius: 8px; cursor: pointer; width: 100%; font-family: inherit; transition: 0.3s; box-sizing: border-box; }
        .btn:hover:not(.locked) { border-color: var(--gold); background: #333; }
        .locked { opacity: 0.3; cursor: not-allowed; filter: grayscale(1); }
        
        #explore-btn { width: 100%; height: 75px; background: var(--blue); border: none; color: white; font-weight: bold; font-size: 18px; position: fixed; bottom: 0; z-index: 500; display: none; }
        #menu-trigger { position: fixed; bottom: 90px; right: 20px; width: 60px; height: 60px; background: var(--gold); border-radius: 50%; display: none; align-items: center; justify-content: center; font-size: 30px; cursor: pointer; z-index: 1000; color: #000; }

        #battle-hud { background: #1a0505; border: 2px solid var(--red); padding: 15px; width: 90%; margin: 10px auto; border-radius: 10px; display: none; }
        .bar { height: 10px; background: #333; border-radius: 5px; margin: 8px 0; overflow: hidden; }
        .bar-fill { height: 100%; background: var(--red); width: 100%; transition: 0.4s; }
        #skill-bar { display: flex; gap: 5px; margin-top: 10px; }

        .stat-row { display: flex; justify-content: space-between; margin: 8px 0; border-bottom: 1px solid #333; padding-bottom: 4px; }
        input, select { width: 100%; padding: 12px; margin: 10px 0; background: #222; color: #fff; border: 1px solid #444; border-radius: 5px; box-sizing: border-box; }
    </style>
</head>
<body>

    <div id="setup-screen" class="screen">
        <div class="box">
            <h2 style="color:var(--gold)">KADERÄ°NÄ° SEÃ‡</h2>
            <input type="text" id="p-name" placeholder="AdÄ±n ne, yolcu?">
            <select id="p-gender"><option value="Erkek">Erkek</option><option value="KadÄ±n">KadÄ±n</option></select>
            <select id="p-class">
                <option value="SavaÅŸÃ§Ä±">SavaÅŸÃ§Ä±</option>
                <option value="BÃ¼yÃ¼cÃ¼">BÃ¼yÃ¼cÃ¼</option>
                <option value="AvcÄ±">AvcÄ±</option>
                <option value="ÅifacÄ±">ÅifacÄ±</option>
            </select>
            <button class="btn" style="background:var(--gold); color:#000;" onclick="startGame()">UYANIÅI BAÅLAT</button>
        </div>
    </div>

    <div id="game-screen" class="screen">
        <div id="battle-hud">
            <div style="display:flex; justify-content:space-between; font-weight:bold;">
                <span id="m-name" style="color:var(--red);">DÃ¼ÅŸman</span>
                <span id="p-hp-view" style="color:var(--green);">Can: 100</span>
            </div>
            <div class="bar"><div id="m-hp-bar" class="bar-fill"></div></div>
            <div id="skill-bar"></div>
        </div>
        <div id="log-window"></div>
        <div id="menu-trigger" onclick="toggleMenu('main')">ğŸ“œ</div>
        <button id="explore-btn" onclick="explore()">SÄ°SLERÄ°N Ä°Ã‡Ä°NE GÄ°R</button>
    </div>

    <div id="overlay" class="screen" onclick="if(event.target==this) closeOverlay()">
        <div id="menu-content" class="box" onclick="event.stopPropagation()"></div>
    </div>

<script>
    let p = { 
        name: "", gender: "", class: "", lvl: 1, xp: 0, nextXp: 100, 
        hp: 100, maxHp: 100, atk: 15, weapon: null, inv: [] 
    };

    const classData = {
        "SavaÅŸÃ§Ä±": { w: "PaslÄ± KÄ±lÄ±Ã§", basic: "Yumruk", story: "kÄ±lÄ±cÄ±nÄ±n aÄŸÄ±rlÄ±ÄŸÄ±nÄ±" },
        "BÃ¼yÃ¼cÃ¼": { w: "Ã‡atlak DeÄŸnek", basic: "Enerji", story: "kitaplarÄ±n fÄ±sÄ±ltÄ±sÄ±nÄ±" },
        "AvcÄ±": { w: "KÄ±rÄ±k Yay", basic: "Tekme", story: "rÃ¼zgarÄ±n yÃ¶nÃ¼nÃ¼" },
        "ÅifacÄ±": { w: "Eski AsÃ¢", basic: "IÅŸÄ±k ÅamarÄ±", story: "dualarÄ±n gÃ¼cÃ¼nÃ¼" }
    };

    const monsterDB = [
        { n: "KÃ¶r SÄ±Ã§an", min: 1, max: 4, hp: 45, atk: 7, xp: 50 },
        { n: "Sis Kurdu", min: 3, max: 7, hp: 110, atk: 18, xp: 140 },
        { n: "GÃ¶lge Ejderi", min: 8, max: 10, hp: 900, atk: 70, xp: 2000 }
    ];

    let enemy = null;

    function startGame() {
        p.name = document.getElementById('p-name').value || "YabancÄ±";
        p.gender = document.getElementById('p-gender').value;
        p.class = document.getElementById('p-class').value;

        document.getElementById('setup-screen').style.display = 'none';
        document.getElementById('game-screen').style.display = 'flex';
        document.getElementById('explore-btn').style.display = 'block';
        document.getElementById('menu-trigger').style.display = 'flex';

        addLog(`Elas ateÅŸin baÅŸÄ±nda sana bakÄ±yor: "${p.name}, bir ${p.class} ${p.gender === 'Erkek' ? 'bey' : 'hanÄ±m'} olarak uyanman kaderin bir parÃ§asÄ±. HatÄ±rlÄ±yor musun ${classData[p.class].story}?"`);
    }

    function explore() {
        if(enemy) return;
        let pool = monsterDB.filter(m => p.lvl >= m.min);
        enemy = { ...pool[Math.floor(Math.random()*pool.length)] };
        enemy.maxH = enemy.hp;
        document.getElementById('battle-hud').style.display = 'block';
        document.getElementById('explore-btn').style.display = 'none';
        updateBattleUI();
        addLog(`Sisten bir <b>${enemy.n}</b> belirdi!`);
    }

    function playerHit(mult, type) {
        if(!enemy) return;
        if(type === 'heal') {
            let h = Math.floor(p.maxHp * 0.3); p.hp = Math.min(p.maxHp, p.hp + h);
            addLog(`YaralarÄ±nÄ± sardÄ±n (+${h} Can).`);
        } else {
            let d = Math.floor(p.atk * mult); enemy.hp -= d;
            addLog(`${enemy.n} yaratÄ±ÄŸÄ±na ${d} hasar verdin.`);
        }

        if(enemy.hp <= 0) {
            addLog(`<span style="color:var(--gold)">ZAFER! +${enemy.xp} XP KAZANDIN.</span>`);
            gainXp(enemy.xp);
            endBattle();
        } else {
            p.hp -= enemy.atk;
            addLog(`${enemy.n} sana vurdu! (-${enemy.atk} Can)`);
            if(p.hp <= 0) { addLog("Yenildin..."); p.hp = p.maxHp; endBattle(); }
        }
        updateBattleUI();
    }

    function gainXp(amt) {
        p.xp += amt;
        if(p.xp >= p.nextXp) {
            p.lvl++; p.xp = 0; p.nextXp += 120; p.atk += 10; p.maxHp += 30; p.hp = p.maxHp;
            addLog(`<b style="color:var(--gold)">SEVÄ°YE ATLADIN: ${p.lvl}!</b>`);
            if(p.lvl === 2) { p.inv.push(classData[p.class].w); addLog(`Ã‡antana ${classData[p.class].w} eklendi.`); }
        }
    }

    function endBattle() { enemy = null; document.getElementById('battle-hud').style.display = 'none'; document.getElementById('explore-btn').style.display = 'block'; }

    function updateBattleUI() {
        if(enemy) {
            document.getElementById('m-name').innerText = enemy.n;
            document.getElementById('m-hp-bar').style.width = (enemy.hp/enemy.maxH*100) + "%";
            let btnName = p.weapon ? "SaldÄ±r" : classData[p.class].basic;
            let html = `<button class="btn" onclick="playerHit(1, 'dmg')">${btnName}</button>`;
            if(p.lvl >= 5) {
                let sName = p.class === "ÅifacÄ±" ? "Åifa" : "Ã–zel GÃ¼Ã§";
                let sType = p.class === "ÅifacÄ±" ? "heal" : "dmg";
                html += `<button class="btn" style="border-color:var(--blue)" onclick="playerHit(2.5, '${sType}')">${sName}</button>`;
            }
            document.getElementById('skill-bar').innerHTML = html;
        }
        document.getElementById('p-hp-view').innerText = `Can: ${p.hp}/${p.maxHp}`;
    }

    function addLog(msg) {
        const win = document.getElementById('log-window');
        const e = document.createElement('div');
        e.className = 'log-entry'; e.innerHTML = `> ${msg}`;
        win.appendChild(e);
        if(win.childNodes.length > 6) win.removeChild(win.childNodes[0]);
    }

    function toggleMenu(type) {
        const content = document.getElementById('menu-content');
        document.getElementById('overlay').style.display = 'flex';
        
        if(type === 'main') {
            content.innerHTML = `<h2 style="color:var(--gold)">MENÃœ</h2>
                <button class="btn" onclick="toggleMenu('profile')">ğŸ‘¤ PROFÄ°L</button>
                <button class="btn ${p.lvl < 2 ? 'locked' : ''}" onclick="${p.lvl >= 2 ? "toggleMenu('bag')" : ""}">ğŸ’ Ã‡ANTA (2)</button>
                <button class="btn ${p.lvl < 3 ? 'locked' : ''}" onclick="${p.lvl >= 3 ? "toggleMenu('equip')" : ""}">âš”ï¸ EKÄ°PMAN (3)</button>
                <button class="btn" onclick="closeOverlay()">KAPAT</button>`;
        } else if(type === 'profile') {
            let progress = Math.floor((p.xp / p.nextXp) * 100);
            content.innerHTML = `<h3>${p.name} (${p.gender})</h3>
                <div class="stat-row"><span>Seviye:</span><span>${p.lvl}</span></div>
                <div class="stat-row"><span>SaldÄ±rÄ±:</span><span>${p.atk}</span></div>
                <div style="text-align:left; font-size:12px; margin-top:10px;">XP: ${p.xp} / ${p.nextXp} (%${progress})</div>
                <div class="bar" style="background:#222"><div class="bar-fill" style="width:${progress}%; background:var(--blue)"></div></div>
                <button class="btn" onclick="toggleMenu('main')">GERÄ°</button>`;
        } else if(type === 'bag') {
            content.innerHTML = `<h3>Ã‡ANTA</h3><p>${p.inv.join("<br>") || "BoÅŸ"}</p><button class="btn" onclick="toggleMenu('main')">GERÄ°</button>`;
        } else if(type === 'equip') {
            let item = classData[p.class].w;
            content.innerHTML = `<h3>EKÄ°PMAN</h3><p>Durum: ${p.weapon ? 'KuÅŸanÄ±ldÄ±' : 'BoÅŸ'}</p>
                ${!p.weapon ? `<button class="btn" onclick="equip()">[${item}] KUÅAN</button>` : ''}
                <button class="btn" onclick="toggleMenu('main')">GERÄ°</button>`;
        }
    }

    function equip() {
        let itm = classData[p.class].w;
        if(p.inv.includes(itm)) { p.weapon = itm; p.atk += 25; addLog(`${itm} kuÅŸandÄ±n!`); toggleMenu('equip'); }
    }

    function closeOverlay() { document.getElementById('overlay').style.display = 'none'; }
</script>
</body>
</html>
