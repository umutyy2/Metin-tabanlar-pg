<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sisli Orman - Bilgi Paneli GÃ¼ncellemesi</title>
    <style>
        :root { --gold: #f1c40f; --bg: #0d0d0d; --panel: #1a1a1a; --text: #e0e0e0; --red: #e74c3c; --blue: #3498db; --green: #2ecc71; }
        body { background: var(--bg); color: var(--text); font-family: 'Segoe UI', sans-serif; margin: 0; overflow: hidden; }
        
        .screen { position: fixed; inset: 0; display: none; flex-direction: column; align-items: center; justify-content: center; z-index: 100; }
        #setup-screen { display: flex; background: #000; z-index: 5000; }
        #game-screen { background: var(--bg); z-index: 10; display: flex; flex-direction: column; }
        #overlay { background: rgba(0,0,0,0.96); z-index: 2000; }

        .box { background: var(--panel); padding: 25px; border: 2px solid var(--gold); border-radius: 12px; width: 330px; text-align: center; box-shadow: 0 10px 30px rgba(0,0,0,0.8); }
        
        #log-window { flex: 1; width: 100%; padding: 20px; box-sizing: border-box; display: flex; flex-direction: column; justify-content: flex-end; overflow: hidden; }
        .log-entry { margin-bottom: 8px; padding: 12px; background: rgba(255,255,255,0.03); border-radius: 6px; border-left: 4px solid var(--gold); font-size: 14px; animation: slideIn 0.2s ease; }
        @keyframes slideIn { from { opacity: 0; transform: translateY(5px); } to { opacity: 1; transform: translateY(0); } }
        
        .btn { background: #222; color: #fff; border: 1px solid #444; padding: 12px; margin: 5px; border-radius: 8px; cursor: pointer; width: 100%; font-family: inherit; transition: 0.2s; box-sizing: border-box; font-weight: bold; }
        .btn:hover:not(.locked) { border-color: var(--gold); color: var(--gold); }
        .locked { opacity: 0.3; cursor: not-allowed; filter: grayscale(1); }
        
        #explore-btn { width: 100%; height: 75px; background: var(--blue); border: none; color: white; font-weight: bold; font-size: 16px; position: fixed; bottom: 0; z-index: 500; display: none; cursor: pointer; }
        #menu-trigger { position: fixed; bottom: 90px; right: 20px; width: 60px; height: 60px; background: var(--gold); border-radius: 50%; display: none; align-items: center; justify-content: center; font-size: 28px; cursor: pointer; z-index: 1000; color: #000; box-shadow: 0 4px 15px rgba(241, 196, 15, 0.3); }

        #battle-hud { background: #1a0505; border: 2px solid var(--red); padding: 15px; width: 90%; margin: 10px auto; border-radius: 10px; display: none; }
        .bar { height: 10px; background: #333; border-radius: 5px; margin: 5px 0; overflow: hidden; }
        .bar-fill { height: 100%; background: var(--red); width: 100%; transition: 0.4s; }

        .stat-line { display: flex; justify-content: space-between; margin: 10px 0; border-bottom: 1px solid #333; padding-bottom: 5px; }
        input, select { width: 100%; padding: 12px; margin: 10px 0; background: #222; color: #fff; border: 1px solid #444; border-radius: 5px; box-sizing: border-box; }
    </style>
</head>
<body>

    <div id="setup-screen" class="screen">
        <div class="box">
            <h2 style="color:var(--gold)">KADERÄ°NÄ° Ã‡Ä°Z</h2>
            <input type="text" id="p-name" placeholder="Kahraman AdÄ±">
            <select id="p-class">
                <option value="SavaÅŸÃ§Ä±">SavaÅŸÃ§Ä±</option>
                <option value="BÃ¼yÃ¼cÃ¼">BÃ¼yÃ¼cÃ¼</option>
                <option value="AvcÄ±">AvcÄ±</option>
                <option value="ÅifacÄ±">ÅifacÄ±</option>
            </select>
            <button class="btn" style="background:var(--gold); color:#000;" onclick="startGame()">BAÅLA</button>
        </div>
    </div>

    <div id="game-screen" class="screen">
        <div id="battle-hud">
            <div id="m-name" style="color:var(--red); font-weight:bold;">DÃ¼ÅŸman</div>
            <div class="bar"><div id="m-hp-bar" class="bar-fill"></div></div>
            <div id="skills-container" style="display:flex; gap:5px;"></div>
        </div>
        <div id="log-window"></div>
        <div id="menu-trigger" onclick="toggleMenu('main')">ğŸ“œ</div>
        <button id="explore-btn" onclick="explore()">ORMANDA Ä°LERLE</button>
    </div>

    <div id="overlay" class="screen" onclick="if(event.target==this) closeOverlay()">
        <div id="menu-content" class="box" onclick="event.stopPropagation()"></div>
    </div>

<script>
    let p = { 
        name: "", class: "", lvl: 1, xp: 0, nextXp: 100, 
        hp: 100, maxHp: 100, atk: 15, weapon: null,
        inv: [] 
    };

    const classData = {
        "SavaÅŸÃ§Ä±": { w: "AÄŸÄ±r KÄ±lÄ±Ã§", basic: "Yumruk", power: 25 },
        "BÃ¼yÃ¼cÃ¼": { w: "Kristal Asa", basic: "KÄ±vÄ±lcÄ±m", power: 25 },
        "AvcÄ±": { w: "Kemik Yay", basic: "Tekme", power: 25 },
        "ÅifacÄ±": { w: "Kutsal Dal", basic: "IÅŸÄ±k", power: 20 }
    };

    const monsters = [
        { n: "Sis SÄ±Ã§anÄ±", min: 1, max: 3, hp: 50, atk: 8, xp: 45 },
        { n: "GÃ¶lge Kurdu", min: 3, max: 6, hp: 120, atk: 18, xp: 120 },
        { n: "KaranlÄ±k ÅÃ¶valye", min: 6, max: 9, hp: 300, atk: 35, xp: 450 },
        { n: "KADÄ°M EJDERHA", min: 10, max: 10, hp: 1000, atk: 75, xp: 2500 }
    ];

    let currentEnemy = null;

    function startGame() {
        p.name = document.getElementById('p-name').value || "Yolcu";
        p.class = document.getElementById('p-class').value;
        document.getElementById('setup-screen').style.display = 'none';
        document.getElementById('game-screen').style.display = 'flex';
        document.getElementById('explore-btn').style.display = 'block';
        document.getElementById('menu-trigger').style.display = 'flex';
        addLog(`HoÅŸ geldin ${p.name}. Macera baÅŸlÄ±yor...`);
    }

    function explore() {
        if(currentEnemy) return;
        let pool = monsters.filter(m => p.lvl >= m.min);
        currentEnemy = { ...pool[Math.floor(Math.random()*pool.length)] };
        currentEnemy.mHp = currentEnemy.hp;
        document.getElementById('battle-hud').style.display = 'block';
        document.getElementById('explore-btn').style.display = 'none';
        updateUI();
        addLog(`KarÅŸÄ±na bir <b>${currentEnemy.n}</b> Ã§Ä±ktÄ±!`);
    }

    function attack(mult) {
        let dmg = Math.floor(p.atk * mult);
        currentEnemy.hp -= dmg;
        addLog(`${currentEnemy.n} yaratÄ±ÄŸÄ±na ${dmg} vurdun.`);
        
        if(currentEnemy.hp <= 0) {
            addLog(`<span style="color:var(--green)">ZAFERSizindir!</span>`);
            addLog(`<span style="color:var(--gold)">KAZANÃ‡: +${currentEnemy.xp} XP</span>`);
            gainXp(currentEnemy.xp);
            endBattle();
        } else {
            p.hp -= currentEnemy.atk;
            addLog(`${currentEnemy.n} sana vurdu: -${currentEnemy.atk} Can.`);
            if(p.hp <= 0) { 
                addLog(`<span style="color:var(--red)">Yenildin ve geri Ã§ekildin.</span>`); 
                p.hp = p.maxHp; 
                endBattle(); 
            }
        }
        updateUI();
    }

    function gainXp(amt) {
        p.xp += amt;
        if(p.xp >= p.nextXp) {
            let overflow = p.xp - p.nextXp;
            p.lvl++; p.xp = overflow; 
            p.nextXp = Math.floor(p.nextXp * 1.5); 
            p.atk += 8; p.maxHp += 20; p.hp = p.maxHp;
            addLog(`<b style="color:var(--gold)">SEVÄ°YE ATLADIN: ${p.lvl}!</b>`);
            if(p.lvl === 2) { 
                p.inv.push(classData[p.class].w); 
                addLog(`<i>Yerden bir eÅŸya aldÄ±n: ${classData[p.class].w}</i>`); 
            }
        }
    }

    function endBattle() {
        currentEnemy = null;
        document.getElementById('battle-hud').style.display = 'none';
        document.getElementById('explore-btn').style.display = 'block';
    }

    function updateUI() {
        if(currentEnemy) {
            document.getElementById('m-name').innerText = currentEnemy.n;
            document.getElementById('m-hp-bar').style.width = (currentEnemy.hp/currentEnemy.mHp*100) + "%";
            let btnText = p.weapon ? "Silahla SaldÄ±r" : classData[p.class].basic;
            document.getElementById('skills-container').innerHTML = `<button class="btn" onclick="attack(1)">${btnText}</button>`;
            if(p.lvl >= 5) document.getElementById('skills-container').innerHTML += `<button class="btn" style="color:var(--blue)" onclick="attack(2.5)">Ã–ZEL GÃœÃ‡</button>`;
        }
    }

    function addLog(msg) {
        const win = document.getElementById('log-window');
        const entry = document.createElement('div');
        entry.className = 'log-entry';
        entry.innerHTML = `> ${msg}`;
        win.appendChild(entry);
        if(win.childNodes.length > 6) win.removeChild(win.childNodes[0]);
    }

    function toggleMenu(type) {
        const content = document.getElementById('menu-content');
        document.getElementById('overlay').style.display = 'flex';
        
        if(type === 'main') {
            content.innerHTML = `
                <h2 style="color:var(--gold)">ğŸ“œ MENÃœ</h2>
                <button class="btn" onclick="toggleMenu('profile')">ğŸ‘¤ PROFÄ°L</button>
                <button class="btn ${p.lvl < 2 ? 'locked' : ''}" onclick="${p.lvl >= 2 ? "toggleMenu('bag')" : ""}">ğŸ’ Ã‡ANTA</button>
                <button class="btn ${p.lvl < 3 ? 'locked' : ''}" onclick="${p.lvl >= 3 ? "toggleMenu('equip')" : ""}">âš”ï¸ EKÄ°PMAN</button>
                <button class="btn" style="color:var(--red)" onclick="closeOverlay()">KAPAT</button>`;
        } else if(type === 'profile') {
            let progress = Math.floor((p.xp / p.nextXp) * 100);
            content.innerHTML = `
                <h3 style="color:var(--gold)">ğŸ‘¤ KARAKTER BÄ°LGÄ°SÄ°</h3>
                <div class="stat-line"><span>Ä°sim:</span> <span>${p.name}</span></div>
                <div class="stat-line"><span>SÄ±nÄ±f:</span> <span>${p.class}</span></div>
                <div class="stat-line"><span>Seviye:</span> <span>${p.lvl}</span></div>
                <div class="stat-line"><span>SaldÄ±rÄ±:</span> <span>${p.atk}</span></div>
                <div class="stat-line"><span>Can:</span> <span>${p.hp}/${p.maxHp}</span></div>
                <div style="margin-top:15px; text-align:left; font-size:12px;">XP: ${p.xp} / ${p.nextXp} (%${progress})</div>
                <div class="bar" style="background:#222"><div class="bar-fill" style="width:${progress}%; background:var(--blue)"></div></div>
                <button class="btn" onclick="toggleMenu('main')">GERÄ°</button>`;
        } else if(type === 'bag') {
            content.innerHTML = `<h3>ğŸ’ Ã‡ANTA</h3><p>${p.inv.join("<br>") || "BoÅŸ"}</p><button class="btn" onclick="toggleMenu('main')">GERÄ°</button>`;
        } else if(type === 'equip') {
            let item = classData[p.class].w;
            let status = p.weapon ? `<span style="color:var(--green)">KuÅŸanÄ±ldÄ±</span>` : `<span style="color:var(--red)">KuÅŸanÄ±lmadÄ±</span>`;
            content.innerHTML = `<h3>âš”ï¸ EKÄ°PMAN</h3>
                <div class="stat-line"><span>Silah:</span> <span>${item}</span></div>
                <div class="stat-line"><span>Durum:</span> <span>${status}</span></div>
                <p style="font-size:11px; color:#888;">(+${classData[p.class].power} Hasar Verir)</p>
                ${!p.weapon ? `<button class="btn" onclick="equipItem()">KUÅAN</button>` : ''}
                <button class="btn" onclick="toggleMenu('main')">GERÄ°</button>`;
        }
    }

    function equipItem() {
        let item = classData[p.class].w;
        if(p.inv.includes(item)) {
            p.weapon = item; 
            p.atk += classData[p.class].power;
            addLog(`${item} kuÅŸanÄ±ldÄ±. GÃ¼cÃ¼n bÃ¼yÃ¼k Ã¶lÃ§Ã¼de arttÄ±!`);
            toggleMenu('equip');
        }
    }

    function closeOverlay() { document.getElementById('overlay').style.display = 'none'; }
</script>
</body>
</html>
